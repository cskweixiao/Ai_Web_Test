# EvidenceViewerNew 组件使用指南

## 概述

`EvidenceViewerNew` 是对原有 `EvidenceViewer` 组件的全面重设计，提供了更现代、美观的用户界面和增强的用户体验。

## 主要改进

### 🎨 视觉设计
- **现代化UI**: 使用卡片式设计、阴影效果和渐变色彩
- **响应式布局**: 支持不同屏幕尺寸的自动适配
- **精美的动画**: 悬停效果、过渡动画和平滑交互

### 🖼️ 图片展示
- **真实缩略图**: 显示实际的图片缩略图而非图标
- **渐进加载**: 智能加载缩略图，提升性能
- **网格布局**: 美观的网格排列，支持多种列数

### 🔍 增强预览
- **全屏预览**: 支持全屏模式查看图片
- **缩放功能**: 支持放大缩小 (0.25x - 3x)
- **键盘导航**: 支持键盘快捷键操作
- **详细信息**: 显示文件大小、创建时间等信息

### 🎛️ 交互体验
- **智能筛选**: 支持按步骤和类型筛选
- **加载状态**: 骨架屏和进度指示器
- **悬停效果**: 丰富的视觉反馈
- **一键操作**: 简化下载和查看流程

## 键盘快捷键

预览模式下支持以下快捷键：
- `ESC`: 关闭预览
- `←/→`: 上一张/下一张图片
- `+/-`: 放大/缩小图片
- `F`: 切换全屏模式

## 使用方法

```tsx
import { EvidenceViewerNew } from '../components/EvidenceViewerNew';

// 在组件中使用
<EvidenceViewerNew runId={testRunId} />
```

## Props

| 属性 | 类型 | 必需 | 描述 |
|------|------|------|------|
| `runId` | `string` | 是 | 测试运行的ID |

## 兼容性

- 完全兼容原有API
- 支持所有现有功能
- 可以无缝替换原有组件

## 性能优化

- 缩略图缓存机制
- 渐进式图片加载
- 虚拟化滚动支持（大文件列表）
- 内存使用优化

## 文件结构

```
src/components/EvidenceViewerNew.tsx
├── 组件定义和Props
├── 状态管理
│   ├── 图片数据
│   ├── 筛选状态
│   └── 预览状态
├── 工具函数
│   ├── 步骤提取
│   ├── URL签名
│   └── 文件格式化
├── UI组件
│   ├── 头部控制区
│   ├── 图片网格
│   ├── 文件列表
│   └── 预览模态框
└── 样式和动画
```

## 样式类名

组件使用了Tailwind CSS类名，主要样式包括：
- `evidence-viewer-new`: 主容器
- `grid`: 响应式网格布局
- `group-hover`: 悬停效果
- `transition-all`: 动画过渡

## 迁移指南

要从旧组件迁移到新组件：

1. 更新导入语句：
   ```tsx
   // 旧的
   import { EvidenceViewer } from '../components/EvidenceViewer';

   // 新的
   import { EvidenceViewerNew } from '../components/EvidenceViewerNew';
   ```

2. 替换组件名称：
   ```tsx
   // 旧的
   <EvidenceViewer runId={runId} />

   // 新的
   <EvidenceViewerNew runId={runId} />
   ```

3. Props接口完全兼容，无需修改其他代码。

## 注意事项

- 新组件需要网络连接来加载图片缩略图
- 预览功能依赖现代浏览器API
- 建议在支持ES6+的环境中使用
- 移动端体验已优化，但某些高级功能在小屏幕上可能受限

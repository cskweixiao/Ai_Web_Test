# 订单管理系统需求文档

## 1. 系统概述
订单管理系统用于管理电商平台的订单流程，包括订单创建、支付、发货、退款等功能。

## 2. 功能模块

### 2.1 订单查询
#### 查询条件
- **订单号**: 支持模糊查询
- **订单状态**: 待支付、已支付、已发货、已完成、已取消
- **下单时间**: 支持日期范围选择
- **收货人**: 支持模糊查询
- **支付方式**: 支付宝、微信、银行卡

#### 查询结果展示
- 列表展示订单信息
- 支持分页，每页显示20条
- 支持导出Excel

### 2.2 订单详情
#### 基本信息
- 订单号
- 下单时间
- 订单状态
- 总金额
- 支付方式

#### 收货信息
- 收货人姓名
- 收货地址
- 联系电话

#### 商品清单
- 商品名称
- 商品规格
- 商品数量
- 单价
- 小计

### 2.3 订单操作
#### 取消订单
- 仅待支付订单可取消
- 取消后不可恢复
- 需要填写取消原因

#### 订单发货
- 仅已支付订单可发货
- 需要填写物流公司和物流单号
- 发货后自动发送短信通知用户

#### 订单退款
- 已支付和已发货订单可申请退款
- 需要审核通过后才能退款
- 退款金额原路返回

## 3. 业务规则

### 3.1 订单超时规则
- 待支付订单30分钟未支付自动取消
- 已发货订单7天未确认收货自动完成

### 3.2 退款规则
- 退款申请需在订单完成后7天内提交
- 退款金额不超过订单实付金额
- 部分退款需要拆分订单

### 3.3 库存规则
- 下单时锁定库存
- 取消订单时释放库存
- 发货时扣减实际库存

## 4. 数据字典

### 4.1 订单状态
| 状态码 | 状态名称 | 说明 |
|--------|---------|------|
| 0 | 待支付 | 订单已创建，等待支付 |
| 1 | 已支付 | 订单已支付，等待发货 |
| 2 | 已发货 | 订单已发货，等待收货 |
| 3 | 已完成 | 订单已完成 |
| 4 | 已取消 | 订单已取消 |
| 5 | 退款中 | 订单退款处理中 |
| 6 | 已退款 | 订单已退款 |

### 4.2 支付方式
| 代码 | 名称 | 说明 |
|------|------|------|
| ALIPAY | 支付宝 | 支付宝扫码或账号支付 |
| WECHAT | 微信支付 | 微信扫码或公众号支付 |
| BANK | 银行卡 | 网银或快捷支付 |

## 5. 接口要求
- 所有接口需要登录认证
- 接口响应时间不超过500ms
- 支持幂等性处理
- 返回统一的JSON格式

## 6. 性能要求
- 订单查询响应时间 < 1秒
- 并发处理能力 > 1000 TPS
- 数据库查询优化，添加必要索引
- 支持缓存机制，提高查询效率


# 🚀 快速测试:页面布局与文案校验功能

## 📋 测试目标

验证系统是否在生成需求文档时,自动添加了"页面布局与文案校验"章节,并能为该章节生成相应的测试用例。

---

## ⏱️ 预计测试时间

**5-10分钟**

---

## 🛠️ 测试步骤

### 步骤1: 启动服务 (2分钟)

打开两个终端:

**终端1 - 后端:**
```bash
cd d:\AI_mvp\ai_test\project
npm run dev:server
```
等待: `✅ Server running on port 3001`

**终端2 - 前端:**
```bash
cd d:\AI_mvp\ai_test\project
npm run dev:frontend
```
等待: `Local: http://localhost:5173/`

---

### 步骤2: 上传Axure原型 (1分钟)

1. 访问: http://localhost:5173/functional-test-cases/generator
2. 点击"上传文件"
3. 选择你的Axure HTML + JS文件
4. 填写:
   - 页面名称: "订单管理页面"
   - 系统名称: "订单管理系统"
   - 模块名称: "订单管理"
5. 点击"开始解析"

---

### 步骤3: 验证需求文档 (2分钟)

等待解析完成后,查看生成的需求文档:

#### ✅ 检查点1: 章节结构

查找第一个页面的章节结构,应该看到:

```markdown
### 1.1 订单管理页面

⚠️ **页面类型：list**

#### 1.1.1 页面布局与文案校验  ← ✅ 必须有这个章节

**必须验证的内容：**
1. **页面标题与导航**: 页面标题文案正确，面包屑导航路径准确
2. **布局结构**: 查询区域、列表区域、按钮区域布局合理，无遮挡或错位
3. **表格列头**: 所有列头文案与原型一致，顺序正确
4. **按钮文案**: 所有操作按钮的文案、位置、样式与原型一致
5. **提示文案**: 空状态提示、加载提示、错误提示等文案友好且准确
6. **字段标签**: 查询条件的标签文案清晰准确，必填项有明显标识

#### 1.1.2 查询条件  ← 章节编号应该是 1.1.2 (不是 1.1.1)
...

#### 1.1.3 列表展示字段
...

#### 1.1.4 操作按钮
...

#### 1.1.5 业务规则
...
```

#### ✅ 检查点2: 章节编号

确认章节编号顺序:
- 1.1.1 → 页面布局与文案校验 ✓
- 1.1.2 → 查询条件 ✓
- 1.1.3 → 列表展示字段 ✓
- 1.1.4 → 操作按钮 ✓
- 1.1.5 → 业务规则 ✓

---

### 步骤4: 批量生成测试用例 (2分钟)

1. 在需求文档编辑器底部,点击"批量生成测试用例"按钮
2. 等待生成完成(约30-60秒)
3. 查看生成的测试用例数量

---

### 步骤5: 验证测试用例 (3分钟)

在测试用例列表中,查找"页面布局与文案校验"相关的测试用例:

#### ✅ 检查点3: 测试用例存在

应该能找到类似这样的测试用例:
- **名称**: "1.1.1-页面布局与文案校验"
- **章节ID**: "1.1.1"
- **章节名称**: "页面布局与文案校验"

#### ✅ 检查点4: 测试点内容

点击查看测试用例详情,应该包含多个测试点(通常6-8个),例如:
1. 页面标题与面包屑导航验证
2. 查询区域布局验证 (如果是列表页)
3. 表格列头文案验证 (如果是列表页)
4. 操作按钮文案与样式验证
5. 空状态提示文案验证
6. 必填标识验证
7. 金额/日期字段格式验证

#### ✅ 检查点5: 测试点字段完整

每个测试点应该包含:
- `testPurpose`: 测试目的(非空)
- `testPoint`: 测试点名称
- `steps`: 操作步骤(明确具体)
- `expectedResult`: 预期结果(清晰可验证)
- `riskLevel`: 风险等级(low/medium)

---

## 📊 预期结果

### ✅ 成功标准

所有以下条件满足 = 功能正常:

1. ✅ 需求文档中每个页面的第一个章节(X.X.1)是"页面布局与文案校验"
2. ✅ 该章节包含6个"必须验证的内容"
3. ✅ 后续章节编号正确递增(X.X.2, X.X.3, ...)
4. ✅ 测试用例列表中存在"X.X.1-页面布局与文案校验"用例
5. ✅ 该测试用例包含6-8个测试点
6. ✅ 测试点覆盖标题、布局、文案、按钮、提示、格式等方面
7. ✅ 所有testPurpose字段不为空

---

## ❌ 常见问题

### 问题1: 需求文档中没有"页面布局与文案校验"章节

**检查**:
1. 查看浏览器Console是否有错误
2. 查看后端终端日志
3. 确认代码已更新(检查`functionalTestCaseAIService.ts`第437-563行)

**解决**:
```bash
# 重启服务
# 终端1: Ctrl+C 停止后端
npm run dev:server

# 终端2: Ctrl+C 停止前端
npm run dev:frontend
```

---

### 问题2: 测试用例没有为"页面布局与文案校验"章节生成

**检查**:
1. 查看需求文档中是否有该章节(步骤3)
2. 查看后端日志中AI生成测试用例的提示词
3. 确认章节ID是否为"X.X.1"

**解决**:
1. 手动选择"1.1.1"章节,点击"生成测试用例"
2. 查看生成结果和错误信息

---

### 问题3: 测试点数量过少(少于5个)

**检查**:
1. 查看需求文档中"页面布局与文案校验"章节的内容是否完整
2. 查看测试用例的coverageAreas字段

**解决**:
1. 手动补充测试点
2. 或重新生成该章节的测试用例

---

## 🔍 调试日志

### 后端日志关键信息

生成需求文档时,应该看到:

```
✅ [需求文档生成] 开始生成需求文档
📊 页面数量: 1
📝 AI提示词长度: XXXX 字符
...
✅ [需求文档生成] 完成
```

生成测试用例时,应该看到:

```
🔍 [测试用例生成] 开始为章节生成测试用例
   章节ID: 1.1.1
   章节名称: 页面布局与文案校验
...
✅ [测试用例生成] 完成
   生成数量: 1条
   测试点数量: 7个
```

---

## 📸 预期截图

### 需求文档截图

应该看到类似这样的目录结构:

```
目录
1. 概述
2. 功能需求
  2.1 订单管理页面
    2.1.1 页面布局与文案校验    ← 🆕
    2.1.2 查询条件
    2.1.3 列表展示字段
    2.1.4 操作按钮
    2.1.5 业务规则
```

### 测试用例列表截图

应该看到类似这样的用例:

| 用例名称 | 章节ID | 章节名称 | 测试点数 | 优先级 |
|---------|--------|---------|---------|-------|
| 1.1.1-页面布局与文案校验 | 1.1.1 | 页面布局与文案校验 | 7 | high |
| 1.1.2-查询条件验证 | 1.1.2 | 查询条件 | 12 | high |
| 1.1.3-列表展示验证 | 1.1.3 | 列表展示字段 | 8 | medium |
| 1.1.4-操作按钮验证 | 1.1.4 | 操作按钮 | 10 | high |

---

## ✅ 测试完成清单

完成以下检查即可确认功能正常:

- [ ] 服务启动成功(前端+后端)
- [ ] Axure原型上传并解析成功
- [ ] 需求文档包含"页面布局与文案校验"章节(1.1.1)
- [ ] 章节内容包含6个验证点
- [ ] 后续章节编号正确(1.1.2, 1.1.3, ...)
- [ ] 测试用例自动生成
- [ ] 存在"1.1.1-页面布局与文案校验"测试用例
- [ ] 测试用例包含6-8个测试点
- [ ] 测试点内容合理(覆盖标题、布局、文案、按钮等)
- [ ] testPurpose字段不为空

---

## 🆘 如果仍有问题

请收集以下信息:

1. **浏览器Console日志** (F12 → Console)
2. **后端终端日志** (完整输出)
3. **需求文档截图** (特别是目录和1.1.1章节)
4. **测试用例列表截图**
5. **问题描述** (哪一步失败,预期vs实际)

---

**测试时间**: _____________
**测试结果**: _____________
**问题记录**: _____________

---

**文档版本**: v1.0
**创建时间**: 2025-11-05

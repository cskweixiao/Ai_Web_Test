# ğŸ—ï¸ æŠ€æœ¯æ¶æ„

Ai Web Test è‡ªåŠ¨åŒ–æµ‹è¯•å¹³å°æŠ€æœ¯æ¶æ„è¯´æ˜ã€‚

---

## ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Ai Web Test ç³»ç»Ÿæ¶æ„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å‰ç«¯å±‚         â”‚     åç«¯å±‚       â”‚         AI æ‰§è¡Œå±‚                 â”‚
â”‚                  â”‚                  â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ React 18     â”‚ â”‚ â”‚ Express API  â”‚ â”‚ â”‚ AI Parser                   â”‚  â”‚
â”‚ â”‚ TypeScript   â”‚â—„â”¼â”€â”¤ WebSocket    â”‚â—„â”¼â”€â”¤ Axure HTML Parser           â”‚  â”‚
â”‚ â”‚ Tailwind CSS â”‚ â”‚ â”‚ Prisma ORM   â”‚ â”‚ â”‚ Test Generator (3é˜¶æ®µ)       â”‚  â”‚
â”‚ â”‚ ECharts      â”‚ â”‚ â”‚ JWT Auth     â”‚ â”‚ â”‚ MCP Client                  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                  â”‚                  â”‚               â”‚                  â”‚
â”‚                  â”‚                  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                  â”‚                  â”‚ â”‚ RAG çŸ¥è¯†å¢å¼ºå±‚               â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ â”‚ Qdrant å‘é‡æ•°æ®åº“       â”‚ â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ â”‚ - ä¸šåŠ¡è§„åˆ™çŸ¥è¯†åº“        â”‚ â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ â”‚ - æµ‹è¯•æ¨¡å¼çŸ¥è¯†åº“        â”‚ â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ â”‚ - å†å²è¸©å‘çŸ¥è¯†åº“        â”‚ â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ â”‚ - é£é™©åœºæ™¯çŸ¥è¯†åº“        â”‚ â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ â”‚ é˜¿é‡Œé€šä¹‰ Embedding API  â”‚ â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ â”‚ (1024ç»´å‘é‡åŒ–)          â”‚ â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚                  â”‚                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                  â”‚                  â”‚               â”‚                  â”‚
â”‚                  â”‚                  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                  â”‚                  â”‚ â”‚ Playwright æµè§ˆå™¨è‡ªåŠ¨åŒ–      â”‚  â”‚
â”‚                  â”‚                  â”‚ â”‚ - å…ƒç´ è¯†åˆ«  - æˆªå›¾ä¿å­˜      â”‚  â”‚
â”‚                  â”‚                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                       â”‚   MySQL     â”‚
                       â”‚   æ•°æ®åº“    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒæŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| React | 18.3.1 | ç°ä»£åŒ–å‰ç«¯æ¡†æ¶ |
| TypeScript | 5.5.3 | ç±»å‹å®‰å…¨çš„ JavaScript |
| Tailwind CSS | 3.4.1 | å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶ |
| Framer Motion | 10.16.16 | æµç•…çš„åŠ¨ç”»åº“ |
| Vite | 5.4.2 | æé€Ÿæ„å»ºå·¥å…· |
| ECharts | æœ€æ–°ç‰ˆ | æ•°æ®å¯è§†åŒ– |

### åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Node.js | >= 18 | æœåŠ¡ç«¯è¿è¡Œæ—¶ |
| Express | 4.18.0 | Web æ¡†æ¶ |
| Prisma | 6.11.1 | ç°ä»£åŒ– ORM |
| MySQL | >= 8.0 | å…³ç³»å‹æ•°æ®åº“ |
| JWT | 9.0.2 | èº«ä»½è®¤è¯ |
| WebSocket (ws) | 8.18.3 | å®æ—¶é€šä¿¡ |

### AI ä¸æµ‹è¯•

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| MCP SDK | 1.0.0 | æ¨¡å‹ä¸Šä¸‹æ–‡åè®® |
| Playwright | 1.54.2 | æµè§ˆå™¨è‡ªåŠ¨åŒ– |
| Cheerio | 1.1.2 | HTML è§£æ |
| Qdrant | 1.12+ | å‘é‡æ•°æ®åº“ (RAG) |
| é˜¿é‡Œé€šä¹‰ Embedding | v4 | 1024ç»´å‘é‡åŒ– (RAG) |

---

## é¡¹ç›®ç»“æ„

```
project/
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/         # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AIBulkUpdateModal.tsx
â”‚   â”‚   â”œâ”€â”€ MarkdownEditor.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TestCases.tsx
â”‚   â”‚   â”œâ”€â”€ TestRuns.tsx
â”‚   â”‚   â”œâ”€â”€ FunctionalTestCaseGenerator.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ services/          # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”œâ”€â”€ testService.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ types/             # TypeScript ç±»å‹
â”‚       â””â”€â”€ test.ts
â”œâ”€â”€ server/                # åç«¯æºç 
â”‚   â”œâ”€â”€ routes/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ test.ts
â”‚   â”‚   â”œâ”€â”€ aiBulkUpdate.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ mcpClient.ts              # MCP å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ aiParser.ts               # AI è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ testExecution.ts          # æµ‹è¯•æ‰§è¡Œ
â”‚   â”‚   â”œâ”€â”€ testCaseKnowledgeBase.ts  # RAG çŸ¥è¯†åº“
â”‚   â”‚   â”œâ”€â”€ axureService.ts           # Axure è§£æ
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ types/             # åç«¯ç±»å‹
â”œâ”€â”€ prisma/                # æ•°æ®åº“
â”‚   â”œâ”€â”€ schema.prisma      # æ•°æ®åº“æ¨¡å¼
â”‚   â””â”€â”€ migrations/        # è¿ç§»æ–‡ä»¶
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â”œâ”€â”€ INSTALLATION.md
â”‚   â”œâ”€â”€ AI_GENERATOR.md
â”‚   â”œâ”€â”€ RAG_SETUP.md
â”‚   â”œâ”€â”€ EXECUTION.md
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â”œâ”€â”€ CONFIGURATION.md
â”‚   â””â”€â”€ TROUBLESHOOTING.md
â”œâ”€â”€ scripts/               # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ start.cjs
â””â”€â”€ README.md             # ä¸»æ–‡æ¡£
```

---

## æ ¸å¿ƒæœåŠ¡è¯¦è§£

### 1. AI è§£æå™¨ (aiParser.ts)

**åŠŸèƒ½**ï¼šè‡ªç„¶è¯­è¨€ â†’ MCP å‘½ä»¤

**å…³é”®æ–¹æ³•**ï¼š
- `parseNextStep()` - è§£æä¸‹ä¸€ä¸ªæ­¥éª¤
- `generateMCPCommand()` - ç”Ÿæˆ MCP å‘½ä»¤
- `buildOperationUserPrompt()` - æ„å»º AI æç¤ºè¯

### 2. MCP å®¢æˆ·ç«¯ (mcpClient.ts)

**åŠŸèƒ½**ï¼šMCP å‘½ä»¤ â†’ Playwright æ“ä½œ

**å…³é”®æ–¹æ³•**ï¼š
- `initialize()` - åˆå§‹åŒ–æµè§ˆå™¨
- `executeStep()` - æ‰§è¡Œå•ä¸ªæ­¥éª¤
- `getSnapshot()` - è·å–é¡µé¢å¿«ç…§
- `takeScreenshot()` - æˆªå›¾

### 3. æµ‹è¯•æ‰§è¡Œå™¨ (testExecution.ts)

**åŠŸèƒ½**ï¼šç¼–æ’æ•´ä¸ªæµ‹è¯•æ‰§è¡Œæµç¨‹

**å…³é”®æ–¹æ³•**ï¼š
- `runTest()` - è¿è¡Œæµ‹è¯•ç”¨ä¾‹
- `runSuite()` - è¿è¡Œæµ‹è¯•å¥—ä»¶

### 4. RAG çŸ¥è¯†åº“ (testCaseKnowledgeBase.ts)

**åŠŸèƒ½**ï¼šå‘é‡æ£€ç´¢å’ŒçŸ¥è¯†å¢å¼º

**å…³é”®æ–¹æ³•**ï¼š
- `searchKnowledge()` - è¯­ä¹‰æœç´¢
- `addKnowledge()` - æ·»åŠ çŸ¥è¯†
- `buildKnowledgeContext()` - æ„å»ºçŸ¥è¯†ä¸Šä¸‹æ–‡

### 5. Axure è§£æå™¨ (axureService.ts)

**åŠŸèƒ½**ï¼šè§£æ Axure HTML æ–‡ä»¶

**å…³é”®æ–¹æ³•**ï¼š
- `parseAxureHTML()` - è§£æ HTML
- `extractPageElements()` - æå–é¡µé¢å…ƒç´ 
- `generateRequirementDoc()` - ç”Ÿæˆéœ€æ±‚æ–‡æ¡£

---

## æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨

| è¡¨å | è¯´æ˜ | å…³é”®å­—æ®µ |
|------|------|---------|
| `test_cases` | æµ‹è¯•ç”¨ä¾‹ | id, title, steps (JSON), system, module |
| `test_suites` | æµ‹è¯•å¥—ä»¶ | id, name, test_cases (JSON) |
| `test_case_executions` | æ‰§è¡Œè®°å½• | id, test_case_id, status, logs (JSON) |
| `bulk_edit_sessions` | AI æ‰¹é‡ä¿®æ”¹ä¼šè¯ | id, change_description, affected_count |
| `case_patch_proposals` | ä¿®æ”¹ææ¡ˆ | id, session_id, old_content (JSON), new_content (JSON) |
| `users` | ç”¨æˆ· | id, email, password_hash, role |

### AI ä¸“ç”¨æšä¸¾

- `proposal_risk_level`: low / medium / high
- `proposal_apply_status`: pending / applied / rejected

---

## API ç«¯ç‚¹

### æµ‹è¯•ç®¡ç†

- `GET /api/test/cases` - è·å–æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨
- `POST /api/test/cases` - åˆ›å»ºæµ‹è¯•ç”¨ä¾‹
- `PUT /api/test/cases/:id` - æ›´æ–°æµ‹è¯•ç”¨ä¾‹
- `DELETE /api/test/cases/:id` - åˆ é™¤æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•æ‰§è¡Œ

- `POST /api/test/execute` - æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹
- `GET /api/test/runs` - è·å–æ‰§è¡Œè®°å½•
- `GET /api/test/runs/:runId` - è·å–å•ä¸ªæ‰§è¡Œè®°å½•

### AI ç”Ÿæˆ

- `POST /api/functional-test-cases/parse-axure` - è§£æ Axure HTML
- `POST /api/functional-test-cases/generate-modules` - ç”Ÿæˆæµ‹è¯•æ¨¡å—
- `POST /api/functional-test-cases/generate-purposes` - ç”Ÿæˆæµ‹è¯•ç›®çš„
- `POST /api/functional-test-cases/generate-test-points` - ç”Ÿæˆæµ‹è¯•ç‚¹

### AI æ‰¹é‡ä¿®æ”¹

- `POST /api/ai-bulk-update/sessions` - åˆ›å»ºä¿®æ”¹ä¼šè¯
- `POST /api/ai-bulk-update/sessions/:id/proposals` - ç”Ÿæˆä¿®æ”¹ææ¡ˆ
- `POST /api/ai-bulk-update/proposals/:id/apply` - åº”ç”¨ææ¡ˆ

### çŸ¥è¯†åº“

- `POST /api/knowledge` - æ·»åŠ çŸ¥è¯†
- `GET /api/knowledge/search` - æœç´¢çŸ¥è¯†
- `POST /api/knowledge/batch-import` - æ‰¹é‡å¯¼å…¥

---

## WebSocket æ¶ˆæ¯æ ¼å¼

### æµ‹è¯•æ‰§è¡ŒçŠ¶æ€æ›´æ–°

```json
{
  "type": "test_update",
  "runId": "run-123",
  "data": {
    "status": "running",
    "currentStep": 2,
    "totalSteps": 5,
    "progress": 40,
    "lastMessage": "å·²å®Œæˆç‚¹å‡»ç™»å½•æŒ‰é’®"
  }
}
```

### æµ‹è¯•æ‰§è¡Œå®Œæˆ

```json
{
  "type": "test_complete",
  "runId": "run-123",
  "data": {
    "status": "completed",
    "passed": 4,
    "failed": 1,
    "duration": 12345
  }
}
```

---

## å®‰å…¨æœºåˆ¶

### è®¤è¯ä¸æˆæƒ

- **JWT Token è®¤è¯**ï¼šå®‰å…¨å¯é ï¼Œæ”¯æŒè¿‡æœŸå’Œåˆ·æ–°
- **è§’è‰²æƒé™ç®¡ç†**ï¼šè¶…çº§ç®¡ç†å‘˜ / æ™®é€šç”¨æˆ·
- **å¯†ç åŠ å¯†**ï¼šbcrypt å®‰å…¨åŠ å¯†

### API å®‰å…¨

- **CORS æ§åˆ¶**ï¼šé™åˆ¶è·¨åŸŸè®¿é—®
- **è¯·æ±‚é™æµ**ï¼šé˜²æ­¢æ»¥ç”¨
- **è¾“å…¥éªŒè¯**ï¼šé˜²æ­¢ SQL æ³¨å…¥å’Œ XSS

---

## éƒ¨ç½²æ¶æ„

### æ¨èéƒ¨ç½²æ–¹å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Load Balancer (Nginx)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚  Frontend  â”‚   â”‚   Backend  â”‚
â”‚  (Static)  â”‚   â”‚  (Node.js) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                        â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚            â”‚            â”‚
      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”
      â”‚ MySQL  â”‚   â”‚ Qdrant â”‚  â”‚ Redis  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨èé…ç½®

- **å‰ç«¯**: Nginx é™æ€æ–‡ä»¶æ‰˜ç®¡
- **åç«¯**: PM2 è¿›ç¨‹ç®¡ç†ï¼Œå¤šå®ä¾‹éƒ¨ç½²
- **æ•°æ®åº“**: MySQL ä¸»ä»å¤åˆ¶
- **RAG**: Qdrant é›†ç¾¤éƒ¨ç½²
- **ç¼“å­˜**: Redis ç¼“å­˜çƒ­ç‚¹æ•°æ®

---

**è¿”å›**: [README](../README.md)

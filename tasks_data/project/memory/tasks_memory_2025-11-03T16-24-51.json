{
  "tasks": [
    {
      "id": "fb747650-2168-4609-b223-2e4684bb63b6",
      "name": "提取测试点编辑器共享组件",
      "description": "从现有的 TestCaseDetailModal 组件中提取测试点编辑逻辑，创建独立的 TestPointsEditor 组件，支持测试点的添加、删除、编辑功能。新组件需要支持 test_purpose 字段。",
      "notes": "参考文件 TestCaseDetailModal.tsx。字段名称映射：testPoint改为testPointName。新增testPurpose字段放在测试点名称之前。",
      "status": "completed",
      "dependencies": [],
      "createdAt": "2025-11-03T08:08:31.945Z",
      "updatedAt": "2025-11-03T08:13:58.031Z",
      "relatedFiles": [
        {
          "path": "src/components/ai-generator/TestCaseDetailModal.tsx",
          "type": "REFERENCE",
          "description": "参考测试点编辑UI和交互逻辑",
          "lineStart": 1,
          "lineEnd": 276
        },
        {
          "path": "src/components/functional-test-case/TestPointsEditor.tsx",
          "type": "CREATE",
          "description": "新建测试点编辑器组件"
        }
      ],
      "implementationGuide": "1. 创建文件 src/components/functional-test-case/TestPointsEditor.tsx\\n2. 定义 TestPoint 接口：testPurpose(可选), testPointName(必填), steps(必填), expectedResult(必填), riskLevel(必填)\\n3. 从 TestCaseDetailModal.tsx 复用测试点卡片UI布局、updateTestPoint 函数、deleteTestPoint 函数\\n4. 新增 addTestPoint 函数：添加新的空白测试点\\n5. 新增 testPurpose 字段的输入框\\n6. Props: testPoints, onChange, readOnly\\n7. 使用 framer-motion 添加动画",
      "verificationCriteria": "1. 组件正确渲染测试点列表\\n2. 支持添加新测试点\\n3. 支持删除测试点(至少保留1个)\\n4. 支持编辑所有字段\\n5. onChange回调正确触发\\n6. UI样式一致\\n7. 动画效果流畅",
      "analysisResult": "完善功能测试用例的手动创建与编辑功能，采用独立子页面方式实现。通过提取现有组件的测试点编辑逻辑，创建可复用的表单组件，实现创建和编辑两个页面，并集成到现有路由系统中。后端添加单个创建API端点，使用Prisma事务确保数据一致性。",
      "summary": "TestPointsEditor 组件已成功创建，完整实现了测试点的添加、删除、编辑功能。组件从 TestCaseDetailModal 复用了UI布局和交互逻辑，新增了 testPurpose 字段和 addTestPoint 功能。使用 framer-motion 实现了流畅的动画效果。所有字段验证和UI样式与现有组件保持一致。",
      "completedAt": "2025-11-03T08:13:58.017Z"
    }
  ]
}